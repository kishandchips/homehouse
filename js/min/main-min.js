!function($){window.main={vars:{},w:$(window),init:function(){main.vars.header=$("#header"),main.vars.body=$("body"),main.vars.wrapper=$("#kanye-west"),main.vars.page=$("#page"),main.vars.sidebar=$(".sidebar"),main.vars.contact=$("#contact"),this.header.init(),this.slider.init(),this.sidebar.init(),this.cedric.init(),this.contact.init(),this.video.init(),main.w.on("load",function(){$(".flexslider").flexslider({animation:"fade",controlNav:!0,slideshowSpeed:4e3}),main.sidebar.resize()}),$(".equal-height").matchHeight()},header:{element:$("#header"),init:function(){var e=main.header.element;e.length&&(this.megatron.init(),$(".js-login").on("click",function(){$("#login-wrapper").toggleClass("visible")}))},megatron:{init:function(){this.resize(),$("#nav .mob-button").on("click",function(){$("#nav > ul.menu").toggleClass("open")}),main.w.resize(function(){main.header.megatron.resize()})},resize:function(){var e=main.vars.header;main.w.width()<800?(e.removeClass("mega"),e.addClass("mobile")):(e.removeClass("mobile"),e.addClass("mega")),$("html").hasClass("no-touch")&&e.hasClass("mega")&&$("nav .equal-height").matchHeight()}}},slider:{element:$(".flexslider"),init:function(){var e=main.slider.element;e.length&&$(document).scroll(function(){$(document).scrollTop()>350&&$(".arrow-wrap").addClass("fadeOut")})}},sidebar:{element:$(".sidebar"),init:function(){var e=main.sidebar.element;e.length&&(main.sidebar.content=$("#content-wrapper"),main.sidebar.container=e.parent(".container"),this.triggers(),this.resize())},triggers:function(){$(".mob-bar .mob-button").on("click",function(){$("body").toggleClass("sidebar-visible")})},resize:function(){var e=main.vars.sidebar;if(e.length){var i=main.vars.sidebar.outerHeight(),t=$(".inner-content").outerHeight(),n=$("#breadcrumbs").outerHeight(!0);i>t?main.sidebar.container.css("height",i+n+32):main.sidebar.container.css("height",t+n)}}},contact:{element:$("#contact"),init:function(){var e=main.contact.element;e.length&&(this.triggers(),this.map.init())},triggers:function(){$(".feedback-toggle").on("click",function(){main.vars.contact.toggleClass("feedback-visible")}),$(".feedback-overlay").on("click",function(){main.vars.contact.toggleClass("feedback-visible")})},map:{element:$("#map"),init:function(){var e=main.contact.map.element;e.length&&main.w.on("load",function(){main.contact.map.loaded()})},loaded:function(){function e(){i=a.getCenter()}var i=new google.maps.LatLng(51.516098,-.156354),t={zoom:15,draggable:!1,disableDefaultUI:!1,scrollwheel:!1,center:i,styles:[{featureType:"water",elementType:"all",stylers:[{hue:"#e9ebed"},{saturation:-78},{lightness:67},{visibility:"simplified"}]},{featureType:"landscape",elementType:"all",stylers:[{hue:"#ffffff"},{saturation:-100},{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"geometry",stylers:[{hue:"#bbc0c4"},{saturation:-93},{lightness:31},{visibility:"simplified"}]},{featureType:"poi",elementType:"all",stylers:[{hue:"#ffffff"},{saturation:-100},{lightness:100},{visibility:"off"}]},{featureType:"road.local",elementType:"geometry",stylers:[{hue:"#e9ebed"},{saturation:-90},{lightness:-8},{visibility:"simplified"}]},{featureType:"transit",elementType:"all",stylers:[{hue:"#e9ebed"},{saturation:10},{lightness:69},{visibility:"on"}]},{featureType:"administrative.locality",elementType:"all",stylers:[{hue:"#2c2e33"},{saturation:7},{lightness:19},{visibility:"on"}]},{featureType:"road",elementType:"labels",stylers:[{hue:"#bbc0c4"},{saturation:-93},{lightness:31},{visibility:"on"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{hue:"#bbc0c4"},{saturation:-93},{lightness:-2},{visibility:"simplified"}]}]},n=$("#map"),a=new google.maps.Map(n[0],t),o=new google.maps.Marker({position:i,map:a,icon:url.template+"/img/pin.png"});google.maps.event.addDomListener(a,"idle",function(){e()}),google.maps.event.addDomListener(window,"resize",function(){a.setCenter(i)})}}},cedric:{element:$("#isotope"),init:function(){var e=main.cedric.element;e.length&&(main.w.on("load",function(){main.cedric.isotope.init()}),main.cedric.filters.init())},filters:{element:$("#filters"),init:function(){var e=main.cedric.filters.element;if(e.length){var i=$(".filter-button",e),t=$(".js-toggle",e),n=$(".filters-menu"),a=e.offset().top;i.on("click",function(){$("html,body").animate({scrollTop:a});var e=$(this).attr("data-filter");main.cedric.isotope.element.isotope({filter:e})}),t.on("click",function(){e.toggleClass("filters-visible")}),n.on("click","button.filter",function(){var e=$(this).attr("data-filter");main.cedric.isotope.element.isotope({filter:e})}),n.on("click","button.sort",function(){var e=$(this).attr("data-sort-by");main.cedric.isotope.element.isotope({sortBy:e}),main.cedric.isotope.element.isotope({sortBy:e,sortAscending:{name:!0}})}),n.on("click","button.sort-desc",function(){var e=$(this).attr("data-sort-by");main.cedric.isotope.element.isotope({sortBy:e,sortAscending:{name:!1}})})}}},isotope:{element:$("#isotope"),init:function(){var e=main.cedric.isotope.element;e.length&&e.imagesLoaded(function(){e.isotope({itemSelector:".item",masonry:{columnWidth:".grid-sizer"},getSortData:{date:"[data-date]",name:".highlight"}})})}}},video:{element:$(".video-js"),init:function(){var e=main.video.element;e.length&&($("#modal-video button").on("click",function(){$("#intro-video").fadeOut(500,function(){$("#modal-video").remove()})}),player=videojs("#intro-video"),player.ready(function(){this.on("ended",function(){$("#intro-video").fadeOut(500,function(){$("#modal-video").remove()})})}))}}},main.init()}(jQuery);